#!/usr/bin/env node
const fs = require('fs');
const path = require('path');

const routesManifestPath = path.join(__dirname, '..', 'web', '.next', 'routes-manifest.json');
const routesManifestDir = path.dirname(routesManifestPath);

// Create .next directory if it doesn't exist
if (!fs.existsSync(routesManifestDir)) {
  fs.mkdirSync(routesManifestDir, { recursive: true });
}

// Create minimal routes-manifest.json for Next.js App Router
// This file is not generated by Next.js 15 App Router, but Vercel expects it
const routesManifest = {
  version: 3,
  pages404: false,
  basePath: '',
  redirects: [],
  headers: [],
  rewrites: [],
  dynamicRoutes: [],
};

fs.writeFileSync(routesManifestPath, JSON.stringify(routesManifest, null, 2));
console.log(`âœ… Created routes-manifest.json at ${routesManifestPath}`);
